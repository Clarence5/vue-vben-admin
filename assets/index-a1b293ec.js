import k from"./CollapseItem-d8a9fa48.js";import G from"./FormComponentPanel-72a59004.js";import V from"./JsonModal-d2f79f6d.js";import j from"./index-f0e75959.js";import{_ as N}from"./useForm.vue_vue_type_script_setup_true_lang-6a2f6461.js";import Q from"./Toolbar-2e47b8c6.js";import q from"./PropsPanel-446ae98d.js";import U from"./ImportJsonModal-df81c129.js";import X from"./CodeModal-8cf1b86d.js";import"./index-1b6c4a40.js";import{g as P,f as Y}from"./index-634e8894.js";import{b as Z,c as ee,l as oe}from"./formItemConfig-ffa612f1.js";import{f as te,aQ as re,_ as ne}from"./index-6a97c842.js";import{g as se}from"./formItemPropsConfig-29e7a11f.js";import{C as b}from"./index-e6dbae31.js";import{bw as J,bx as ae,$ as le,L as c}from"./antd-2cb51430.js";import{d as ie,k as l,p as f,_ as me,$ as pe,f as n,a9 as i,u as s,a2 as z,ae as ue,aa as de,R as ce,ad as fe,ag as ve,F as he}from"./vue-bfa52d01.js";import"./vuedraggable.umd-74f86f59.js";import"./LayoutItem-f3609c5b.js";import"./FormNode-8606b346.js";import"./FormNodeOperate-5c898215.js";import"./useFormDesignState-5b1e89df.js";import"./index-e67c757a.js";import"./PreviewCode-f9052ea7.js";import"./useCopyToClipboard-1979fad4.js";import"./index-3930a65b.js";import"./FormRender-e66a8f9e.js";import"./BasicForm-9810335b.js";import"./FormItem.vue_vue_type_script_lang-9d87757e.js";import"./componentMap-3a9923aa.js";import"./useFormItem-bb83f293.js";import"./RadioButtonGroup-c5eadf43.js";import"./index-24d774f8.js";import"./useWindowSizeFn-f3eb2b9f.js";import"./uuid-31b8b5a4.js";import"./download-84207253.js";import"./base64Conver-39fc0d26.js";import"./index-69ea2429.js";import"./IconPicker.vue_vue_type_style_index_0_lang-73fc877f.js";import"./index-f58f2bda.js";import"./uniqBy-03306adf.js";import"./useForm-49cd62cf.js";import"./FormProps-a195df0a.js";import"./FormItemProps-7e09731e.js";import"./RuleProps-4c956c61.js";import"./ComponentProps-64273fc5.js";import"./FormOptions-4f1f5a6e.js";import"./FormItemColumnProps-36c277e4.js";import"./index-e84fe5f9.js";const ye=ie({__name:"index",props:{title:{type:String,default:"v-form-antd表单设计器"}},setup(Pe){const{prefixCls:F}=te("form-design"),D=l(null),w=l(null),I=l(null),M=l(null),L=l(null),$=l(null),S=l({}),t=l({schemas:[],layout:"horizontal",labelLayout:"flex",labelWidth:100,labelCol:{},wrapperCol:{},currentItem:{component:"",componentProps:{}},activeKey:1}),R=o=>{o.schemas=o.schemas||[],o.schemas.forEach(e=>{e.colProps=e.colProps||{span:24},e.componentProps=e.componentProps||{},e.itemProps=e.itemProps||{}}),t.value=o},T=re(t,{deep:!0,capacity:20,parse:o=>{const e=c(o),{currentItem:r,schemas:a}=e,d=a&&a.find(m=>m.key===(r==null?void 0:r.key));return d&&(e.currentItem=d),e}}),p=o=>{t.value.currentItem=o,E(o.key?t.value.activeKey===1?2:t.value.activeKey:1)},x=o=>{o.colProps=o.colProps||{},o.colProps.span=se.span},v=(o,e)=>{},g=o=>{const e=c(o);return x(e),P(e),e},h=o=>{var r;const e=c(o);if(x(e),P(e),!((r=t.value.currentItem)!=null&&r.key)){p(e),t.value.schemas&&t.value.schemas.push(e);return}H(e,!1)},W=o=>{const e=c(o);return e.component==="Grid"&&Y([o],r=>{P(r)}),e},H=(o=t.value.currentItem,e=!0)=>{var d;const r=(d=t.value.currentItem)==null?void 0:d.key,a=m=>{m.some((y,C)=>{var K;if(y.key===r){e?m.splice(C,0,W(y)):m.splice(C+1,0,o);const _={newIndex:C+1};return A(_,m,e),!0}["Grid","Tabs"].includes(y.component)&&((K=y.columns)==null||K.forEach(_=>{a(_.children)}))})};t.value.schemas&&a(t.value.schemas)},A=({newIndex:o},e,r=!1)=>{const a=e[o];r&&P(a),p(a)},u=o=>{const e=c(t.value);o==null||o.showModal(e)},E=o=>{t.value.activeKey=o},O=()=>{t.value.schemas=[],p({component:""})},B=(o,e)=>S.value[o]=e;return f("formModel",S),f("setFormModelMethod",B),f("formConfig",t),f("historyReturn",T),f("formDesignMethods",{handleBeforeColAdd:A,handleCopy:H,handleListPush:h,handleSetSelectItem:p,handleAddAttrs:v,setFormConfig:R}),(o,e)=>(me(),pe(he,null,[n(s(le),null,{default:i(()=>[n(s(J),{class:z(`left ${s(F)}-sider`),collapsible:"",collapsedWidth:"0",width:"270",zeroWidthTriggerStyle:{"margin-top":"-70px","background-color":"gray"},breakpoint:"md"},{default:i(()=>[n(s(b),{title:"基础控件"},{default:i(()=>[n(k,{list:s(Z),handleListPush:g,onAddAttrs:v,onHandleListPush:h},null,8,["list"])]),_:1}),n(s(b),{title:"自定义控件"},{default:i(()=>[n(k,{list:s(ee),onAddAttrs:v,handleListPush:g,onHandleListPush:h},null,8,["list"])]),_:1}),n(s(b),{title:"布局控件"},{default:i(()=>[n(k,{list:s(oe),handleListPush:g,onAddAttrs:v,onHandleListPush:h},null,8,["list"])]),_:1})]),_:1},8,["class"]),n(s(ae),null,{default:i(()=>[n(Q,{onHandleOpenJsonModal:e[0]||(e[0]=r=>u(w.value)),onHandleOpenImportJsonModal:e[1]||(e[1]=r=>u(I.value)),onHandlePreview:e[2]||(e[2]=r=>u(M.value)),onHandlePreview2:e[3]||(e[3]=r=>u(L.value)),onHandleOpenCodeModal:e[4]||(e[4]=r=>u($.value)),onHandleClearFormItems:O}),n(G,{"current-item":t.value.currentItem,data:t.value,onHandleSetSelectItem:p},null,8,["current-item","data"])]),_:1}),n(s(J),{class:z(`right ${s(F)}-sider`),collapsible:"",reverseArrow:!0,collapsedWidth:"0",width:"270",zeroWidthTriggerStyle:{"margin-top":"-70px","background-color":"gray"},breakpoint:"lg"},{default:i(()=>[n(q,{ref_key:"propsPanel",ref:D,activeKey:t.value.activeKey},ue({_:2},[de(t.value.schemas,r=>({name:`${r.component}Props`,fn:i(a=>[ce(o.$slots,`${r.component}Props`,fe(ve({formItem:a,props:a.componentProps})),void 0,!0)])}))]),1032,["activeKey"])]),_:3},8,["class"])]),_:3}),n(V,{ref_key:"jsonModal",ref:w},null,512),n(X,{ref_key:"codeModal",ref:$},null,512),n(U,{ref_key:"importJsonModal",ref:I},null,512),n(j,{ref_key:"eFormPreview",ref:M,formConfig:t.value},null,8,["formConfig"]),n(N,{ref_key:"eFormPreview2",ref:L,formConfig:t.value},null,8,["formConfig"])],64))}});const vo=ne(ye,[["__scopeId","data-v-6ca7af74"]]);export{vo as default};
